/*
 * MIT License
 *
 * Copyright (C) 2025, DragonDreams GmbH (info@dragondreams.ch)
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

namespace Dragengine.Utils

pin Dragengine.Gui
pin Dragengine.Scenery
pin Dragengine.ConversationSystem
pin Dragengine.TriggerSystem
pin Dragengine.Commands
pin Dragengine.LoadSave


/**
 * \brief Helper class for BehaviorFactor implementations.
 * \version 1.25
 */
class BehaviorFactoryHelper
	/** \brief Create helper. */
	func new()
	end
	
	
	
	/**
	 * \brief Component behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorComponent component(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorComponent b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorComponent.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorComponent not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorComponent.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default component behavior using parameter "component".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorComponent defaultComponent(BehaviorElementClass eclass, Dictionary parameters)
		return component(eclass, parameters, "component", "")
	end
	
	/**
	 * \brief Optional component behavior using parameter "component".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorComponent optionalComponent(BehaviorElementClass eclass, Dictionary parameters)
		return component(eclass, parameters, "component", null)
	end
	
	
	/**
	 * \brief Actor animated behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorActorAnimated actorAnimated(BehaviorElementClass eclass,\
	Dictionary parameters, String name, String defaultId)
		var ECBehaviorActorAnimated b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorActorAnimated.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorActorAnimated not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorActorAnimated.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default actor animated behavior using parameter "actorAnimated".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorActorAnimated defaultActorAnimated(BehaviorElementClass eclass, Dictionary parameters)
		return actorAnimated(eclass, parameters, "actorAnimated", "")
	end
	
	/**
	 * \brief Optional actor animated behavior using parameter "actorAnimated".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorActorAnimated optionalActorAnimated(BehaviorElementClass eclass, Dictionary parameters)
		return actorAnimated(eclass, parameters, "actorAnimated", null)
	end
	
	
	/**
	 * \brief Animated behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorAnimated animated(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorAnimated b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorAnimated.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorAnimated not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorAnimated.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default animated behavior using parameter "animated".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorAnimated defaultAnimated(BehaviorElementClass eclass, Dictionary parameters)
		return animated(eclass, parameters, "animated", "")
	end
	
	/**
	 * \brief Optional animated behavior using parameter "animated".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorAnimated optionalAnimated(BehaviorElementClass eclass, Dictionary parameters)
		return animated(eclass, parameters, "animated", null)
	end
	
	
	/**
	 * \brief Two state animated behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorTwoStateAnimated twoStateAnimated(BehaviorElementClass eclass,\
	Dictionary parameters, String name, String defaultId)
		var ECBehaviorTwoStateAnimated b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorTwoStateAnimated.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorTwoStateAnimated not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorTwoStateAnimated.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default two state animated behavior using parameter "twoStateAnimated".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorTwoStateAnimated defaultTwoStateAnimated(\
	BehaviorElementClass eclass, Dictionary parameters)
		return twoStateAnimated(eclass, parameters, "twoStateAnimated", "")
	end
	
	/**
	 * \brief Optional two state animated behavior using parameter "twoStateAnimated".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorTwoStateAnimated optionalTwoStateAnimated(\
	BehaviorElementClass eclass, Dictionary parameters)
		return twoStateAnimated(eclass, parameters, "twoStateAnimated", null)
	end
	
	
	/**
	 * \brief Navigator behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorNavigator navigator(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorNavigator b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorNavigator.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorNavigator not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorNavigator.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default navigator behavior using parameter "navigator".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorNavigator defaultNavigator(BehaviorElementClass eclass, Dictionary parameters)
		return navigator(eclass, parameters, "navigator", "")
	end
	
	/**
	 * \brief Optional navigator behavior using parameter "navigator".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorNavigator optionalNavigator(BehaviorElementClass eclass, Dictionary parameters)
		return navigator(eclass, parameters, "navigator", null)
	end
	
	
	/**
	 * \brief NavigationSpace behavior.
	 * \version 1.26
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorNavigationSpace navigationSpace(BehaviorElementClass eclass,\
	Dictionary parameters, String name, String defaultId)
		var ECBehaviorNavigationSpace b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorNavigationSpace.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorNavigationSpace not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorNavigationSpace.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default NavigationSpace behavior using parameter "navigationSpace".
	 * \version 1.26
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorNavigationSpace defaultNavigationSpace(BehaviorElementClass eclass, Dictionary parameters)
		return navigationSpace(eclass, parameters, "navigationSpace", "")
	end
	
	/**
	 * \brief Optional NavigationSpace behavior using parameter "NavigationSpace".
	 * \version 1.26
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorNavigationSpace optionalNavigationSpace(BehaviorElementClass eclass, Dictionary parameters)
		return navigationSpace(eclass, parameters, "navigationSpace", null)
	end
	
	
	/**
	 * \brief NavigationBlocker behavior.
	 * \version 1.26
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorNavigationBlocker navigationBlocker(BehaviorElementClass eclass,\
	Dictionary parameters, String name, String defaultId)
		var ECBehaviorNavigationBlocker b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorNavigationBlocker.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorNavigationBlocker not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorNavigationBlocker.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default NavigationBlocker behavior using parameter "navigationBlocker".
	 * \version 1.26
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorNavigationBlocker defaultNavigationBlocker(BehaviorElementClass eclass, Dictionary parameters)
		return navigationBlocker(eclass, parameters, "navigationBlocker", "")
	end
	
	/**
	 * \brief Optional NavigationBlocker behavior using parameter "NavigationBlocker".
	 * \version 1.26
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorNavigationBlocker optionalNavigationBlocker(BehaviorElementClass eclass, Dictionary parameters)
		return navigationBlocker(eclass, parameters, "navigationBlocker", null)
	end
	
	
	/**
	 * \brief Behavior tree behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorBehaviorTree behaviorTree(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorBehaviorTree b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorBehaviorTree.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorBehaviorTree not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorBehaviorTree.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default behavior tree behavior using parameter "behaviorTree".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorBehaviorTree defaultBehaviorTree(BehaviorElementClass eclass, Dictionary parameters)
		return behaviorTree(eclass, parameters, "behaviorTree", "")
	end
	
	/**
	 * \brief Optional behavior tree behavior using parameter "behaviorTree".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorBehaviorTree optionalBehaviorTree(BehaviorElementClass eclass, Dictionary parameters)
		return behaviorTree(eclass, parameters, "behaviorTree", null)
	end
	
	/**
	 * \brief All behavior tree behaviors using parameter "behaviorTrees".
	 * 
	 * Parameter is of list type. Throws exception if one or more behaviors do not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func void allBehaviorTrees(ECComposeBTSM btsm, BehaviorElementClass eclass, Dictionary parameters)
		var ECBehaviorBehaviorTree b
		if parameters.has("behaviorTrees")
			(parameters.getAt("behaviorTrees") cast Array).forEach(block String each
				if each != null
					b = ECBehaviorBehaviorTree.getBehaviorIn(eclass, each)
					if b == null
						throw EInvalidParam.new("ECBehaviorBehaviorTree not found: " + each)
					end
					btsm.addBehaviorTree(b)
				end
			end)
			
		else
			eclass.forEachBehavior(block ECBehaviorBehaviorTree each
				btsm.addBehaviorTree(each)
			end)
		end
	end
	
	
	/**
	 * \brief Behavior state machine.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorStateMachine stateMachine(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorStateMachine b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorStateMachine.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorStateMachine not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorStateMachine.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default behavior state machine using parameter "stateMachine".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorStateMachine defaultStateMachine(BehaviorElementClass eclass, Dictionary parameters)
		return stateMachine(eclass, parameters, "stateMachine", "")
	end
	
	/**
	 * \brief Optional behavior state machine using parameter "stateMachine".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorStateMachine optionalStateMachine(BehaviorElementClass eclass, Dictionary parameters)
		return stateMachine(eclass, parameters, "stateMachine", null)
	end
	
	/**
	 * \brief All state machine behaviors using parameter "stateMachines".
	 * 
	 * Parameter is of list type. Throws exception if one or more behaviors do not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func void allStateMachines(ECComposeBTSM btsm, BehaviorElementClass eclass, Dictionary parameters)
		var ECBehaviorStateMachine b
		if parameters.has("stateMachines")
			(parameters.getAt("stateMachines") cast Array).forEach(block String each
				if each != null
					b = ECBehaviorStateMachine.getBehaviorIn(eclass, each)
					if b == null
						throw EInvalidParam.new("ECBehaviorStateMachine not found: " + each)
					end
					btsm.addStateMachine(b)
				end
			end)
			
		else
			eclass.forEachBehavior(block ECBehaviorStateMachine each
				btsm.addStateMachine(each)
			end)
		end
	end
	
	
	/**
	 * \brief All behavior tree and state machine behaviors using parameter "behaviorTrees" and "stateMachines".
	 */
	func void allBTSM(ECComposeBTSM btsm, BehaviorElementClass eclass, Dictionary parameters)
		allBehaviorTrees(btsm, eclass, parameters)
		allStateMachines(btsm, eclass, parameters)
	end
	
	
	/**
	 * \brief VR hand behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorVRHand vrHand(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorVRHand b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorVRHand.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorVRHand not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorVRHand.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default vr hand behavior using parameter "vrHand".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorVRHand defaultVRHand(BehaviorElementClass eclass, Dictionary parameters)
		return vrHand(eclass, parameters, "vrHand", "")
	end
	
	/**
	 * \brief Optional vr hand behavior using parameter "vrHand".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorVRHand optionalVRHand(BehaviorElementClass eclass, Dictionary parameters)
		return vrHand(eclass, parameters, "vrHand", null)
	end
	
	
	/**
	 * \brief Dynamic skin behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorDynamicSkin dynamicSkin(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorDynamicSkin b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorDynamicSkin.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorDynamicSkin not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorDynamicSkin.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default dynamic skin behavior using parameter "dynamicSkin".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorDynamicSkin defaultDynamicSkin(BehaviorElementClass eclass, Dictionary parameters)
		return dynamicSkin(eclass, parameters, "dynamicSkin", "")
	end
	
	/**
	 * \brief Optional dynamic skin behavior using parameter "dynamicSkin".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorDynamicSkin optionalDynamicSkin(BehaviorElementClass eclass, Dictionary parameters)
		return dynamicSkin(eclass, parameters, "dynamicSkin", null)
	end
	
	
	/**
	 * \brief Camera behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorCamera camera(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorCamera b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorCamera.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorCamera not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorCamera.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default camera behavior using parameter "camera".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorCamera defaultCamera(BehaviorElementClass eclass, Dictionary parameters)
		return camera(eclass, parameters, "camera", "")
	end
	
	/**
	 * \brief Optional camera behavior using parameter "camera".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorCamera optionalCamera(BehaviorElementClass eclass, Dictionary parameters)
		return camera(eclass, parameters, "camera", null)
	end
	
	
	/**
	 * \brief Custom color behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorCustomColor customColor(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorCustomColor b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorCustomColor.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorCustomColor not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorCustomColor.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default custom color behavior using parameter "customColor".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorCustomColor defaultCustomColor(BehaviorElementClass eclass, Dictionary parameters)
		return customColor(eclass, parameters, "customColor", "")
	end
	
	/**
	 * \brief Optional custom color behavior using parameter "customColor".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorCustomColor optionalCustomColor(BehaviorElementClass eclass, Dictionary parameters)
		return customColor(eclass, parameters, "customColor", null)
	end
	
	
	/**
	 * \brief Renderable canvas behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorRenderableCanvas renderableCanvas(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorRenderableCanvas b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorRenderableCanvas.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorRenderableCanvas not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorRenderableCanvas.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default renderable canvas behavior using parameter "renderableCanvas".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorRenderableCanvas defaultRenderableCanvas(BehaviorElementClass eclass, Dictionary parameters)
		return renderableCanvas(eclass, parameters, "renderableCanvas", "")
	end
	
	/**
	 * \brief Optional renderable canvas behavior using parameter "renderableCanvas".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorRenderableCanvas optionalRenderableCanvas(BehaviorElementClass eclass, Dictionary parameters)
		return renderableCanvas(eclass, parameters, "renderableCanvas", null)
	end
	
	
	/**
	 * \brief Renderable desktop behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorRenderableDesktop renderableDesktop(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorRenderableDesktop b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorRenderableDesktop.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorRenderableDesktop not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorRenderableDesktop.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default renderable desktop behavior using parameter "renderableDesktop".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorRenderableDesktop defaultRenderableDesktop(BehaviorElementClass eclass, Dictionary parameters)
		return renderableDesktop(eclass, parameters, "renderableDesktop", "")
	end
	
	/**
	 * \brief Optional renderable desktop behavior using parameter "renderableDesktop".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorRenderableDesktop optionalRenderableDesktop(BehaviorElementClass eclass, Dictionary parameters)
		return renderableDesktop(eclass, parameters, "renderableDesktop", null)
	end
	
	
	/**
	 * \brief Renderable panel behavior.
	 * \version 1.28
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorRenderablePanel renderablePanel(BehaviorElementClass eclass,\
	Dictionary parameters, String name, String defaultId)
		var ECBehaviorRenderablePanel b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorRenderablePanel.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorRenderablePanel not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorRenderablePanel.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default renderable panel behavior using parameter "renderablePanel".
	 * \version 1.28
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorRenderablePanel defaultRenderablePanel(BehaviorElementClass eclass, Dictionary parameters)
		return renderablePanel(eclass, parameters, "renderablePanel", "")
	end
	
	/**
	 * \brief Optional renderable panel behavior using parameter "renderablePanel".
	 * \version 1.28
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorRenderablePanel optionalRenderablePanel(BehaviorElementClass eclass, Dictionary parameters)
		return renderablePanel(eclass, parameters, "renderablePanel", null)
	end
	
	
	/**
	 * \brief Light behavior.
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 * \param name Name of parameter. Can be absent
	 * \param defaultId Id to use if parameter is absent. Can be null.
	 */
	func ECBehaviorLight light(BehaviorElementClass eclass, Dictionary parameters,\
	String name, String defaultId)
		var ECBehaviorLight b
		if parameters.has(name)
			var String id = parameters.getAt(name) cast String
			if id != null
				b = ECBehaviorLight.getBehaviorIn(eclass, id)
				if b == null
					throw EInvalidParam.new("ECBehaviorLight not found: " + id)
				end
			end
			
		elif defaultId != null
			b = ECBehaviorLight.getBehaviorIn(eclass, defaultId)
		end
		return b
	end
	
	/**
	 * \brief Default light behavior using parameter "light".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorLight defaultLight(BehaviorElementClass eclass, Dictionary parameters)
		return light(eclass, parameters, "light", "")
	end
	
	/**
	 * \brief Optional light behavior using parameter "light".
	 * 
	 * Parameter can be of string type or null. Throws exception if parameter is not null
	 * and the behavior does not exist.
	 * 
	 * \param eclass Element class to look up behavior in.
	 * \param parameters \ref Dictionary of \ref String key and \ref String value.
	 */
	func ECBehaviorLight optionalLight(BehaviorElementClass eclass, Dictionary parameters)
		return light(eclass, parameters, "light", null)
	end
	
	
	/**
	 * \brief Trigger table matching value.
	 * 
	 * Returns \ref BaseGameApp#getTriggerTable() for value "default" and null otherwise.
	 */
	func TSTriggerTable triggerTable(String value)
		if value.equals("default")
			return defaultTriggerTable()
		end
		return null
	end
	
	/**
	 * \brief Default trigger table.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getTriggerTable().
	 */
	func TSTriggerTable defaultTriggerTable()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getTriggerTable() else null
	end
	
	/**
	 * \brief Command manager matching value.
	 * 
	 * Returns \ref BaseGameApp#getCommandManager() for value "default" and null otherwise.
	 */
	func CommandManager commandManager(String value)
		if value.equals("default")
			return defaultCommandManager()
		end
		return null
	end
	
	/**
	 * \brief Default command manager matching value.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getCommandManager().
	 */
	func CommandManager defaultCommandManager()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getCommandManager() else null
	end
	
	/**
	 * \brief Binding manager matching value.
	 * 
	 * Returns \ref BaseGameApp#getTriggerTable() for value "default" and null otherwise.
	 */
	func BindingManager bindingManager(String value)
		if value.equals("default")
			return defaultBindingManager()
		end
		return null
	end
	
	/**
	 * \brief Default binding manager matching value.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getTriggerTable().
	 */
	func BindingManager defaultBindingManager()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getBindingManager() else null
	end
	
	/**
	 * \brief Conversation playback subtitle matching value.
	 * 
	 * Returns \ref BaseGameApp#getWindowSubTitle() for value "default" and null otherwise.
	 */
	func ConversationPlaybackSubTitle subtitle(String value)
		if value.equals("default")
			return defaultSubtitle()
		end
		return null
	end
	
	/**
	 * \brief Default conversation playback subtitle matching value.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getWindowSubTitle().
	 */
	func ConversationPlaybackSubTitle defaultSubtitle()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getWindowSubTitle() else null
	end
	
	/**
	 * \brief Subtitle gui theme matching value.
	 * 
	 * Returns \ref WindowSubTitle#getGuiTheme() on \ref BaseGameApp#getWindowSubTitle()
	 * for value "default". For values starting with "path:" loads gui theme. For all other
	 * valuers returns null.
	 */
	func GuiTheme subtitleTheme(String value)
		if value.equals("default")
			return defaultSubtitleTheme()
			
		elif value.startsWith("path:")
			var Loaders loaders = defaultLoaders()
			if loaders != null
				return loaders.getGuiTheme().loadFromFile(value.substring(5))
			end
		end
		return null
	end
	
	/**
	 * \brief Default subtitle gui theme matching value.
	 * \version 1.28
	 * 
	 * Returns \ref WindowSubTitle#getGuiTheme() on \ref BaseGameApp#getWindowSubTitle().
	 */
	func GuiTheme defaultSubtitleTheme()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getWindowSubTitle().getGuiTheme() else null
	end
	
	/**
	 * \brief Default loaders.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getLoaders().
	 */
	func Loaders defaultLoaders()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getLoaders() else null
	end
	
	/**
	 * \brief Simple conversation converter matching value.
	 * 
	 * Returns \ref BaseGameApp#getSimpleConversationConverter() for value "default"
	 * and null for all other values.
	 */
	func SimpleConversationConverter simpleConversationConverter(String value)
		if value.equals("default")
			return defaultSimpleConversationConverter()
		end
		return null
	end
	
	/**
	 * \brief Default simple conversation converter matching value.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getSimpleConversationConverter().
	 */
	func SimpleConversationConverter defaultSimpleConversationConverter()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getSimpleConversationConverter() else null
	end
	
	/**
	 * \brief Player controllable actor matching value.
	 * 
	 * Returns \ref BaseGameApp#getPlayerControlledActor() for value "default" and null otherwise.
	 */
	func ECBehaviorPlayerControllable.Tracker playerControlledActor(String value)
		if value.equals("default")
			return defaultPlayerControlledActor()
		end
		return null
	end
	
	/**
	 * \brief Default player controllable actor matching value.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getPlayerControlledActor().
	 */
	func ECBehaviorPlayerControllable.Tracker defaultPlayerControlledActor()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getPlayerControlledActor() else null
	end
	
	/**
	 * \brief Translation manager matching value.
	 * 
	 * Returns \ref BaseGameApp#getTranslationManager() for value "default" and null otherwise.
	 */
	func TranslationManager translationManager(String value)
		if value.equals("default")
			return defaultTranslationManager()
		end
		return null
	end
	
	/**
	 * \brief Default translation manager matching value.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getTranslationManager().
	 */
	func TranslationManager defaultTranslationManager()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getTranslationManager() else null
	end
	
	/**
	 * \brief Default ID Generator.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getIDGenerator().
	 */
	func MutableID defaultIDGenerator()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getIDGenerator() else null
	end
	
	/**
	 * \brief Default console.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getConsole().
	 */
	func Console defaultConsole()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getConsole() else null
	end
	
	/**
	 * \brief Default player choice window.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getWindowPlayerChoice().
	 */
	func WindowPlayerChoice defaultWindowPlayerChoice()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getWindowPlayerChoice() else null
	end
	
	/**
	 * \brief Default element classes list.
	 * \version 1.28
	 * 
	 * Returns \ref BaseGameApp#getElementClassList().
	 */
	func ElementClassList defaultElementClassList()
		var BaseGameApp app = BaseGameApp.getApp()
		return app != null if app.getElementClassList() else null
	end
	
	
	/**
	 * \brief Set parameters as prefixed property.
	 * 
	 * Allows to simplify setting properties of a newly added behavior without needing to know
	 * the property prefix used. Considers all parameters starting with "." to be properties with
	 * the prefix prepanded to their name. If id is empty string prepends "prefix". Otherwise
	 * prepends "prefix(id)".
	 */
	func void setPropertiesFromParameters(BehaviorElementClass eclass,\
	Dictionary parameters, String prefix, String id)
		if parameters.getCount() == 0
			return
		end
		
		if not id.empty()
			prefix = prefix + "(" + id + ")"
		end
		
		var bool hasPrefix = not prefix.empty()
		
		parameters.forEach(block String key, Object value
			if key.getAt(0) == '.'
				eclass.setPropertyValue(hasPrefix if prefix + key else key.substring(1), value)
			end
		end)
	end
	
	func void setPropertiesFromParameters(BehaviorElementClass eclass,\
	Dictionary parameters, String prefix)
		setPropertiesFromParameters(eclass, parameters, prefix, "")
	end
	
	func void setPropertiesFromParameters(BehaviorElementClass eclass, Dictionary parameters)
		setPropertiesFromParameters(eclass, parameters, "", "")
	end
	
	
	/** \brief Add common behavior factories to factory list. */
	func void addCommonFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorAnchorElement.Factory.new())
		factories.add(ECBehaviorAvoidedByActor.Factory.new())
		factories.add(ECBehaviorBillboard.Factory.new())
		factories.add(ECBehaviorCamera.Factory.new())
		factories.add(ECBehaviorCollider.Factory.new())
		factories.add(ECBehaviorComponent.Factory.new())
		factories.add(ECBehaviorComposed.Factory.new())
		factories.add(ECBehaviorConvoCoordSystem.Factory.new())
		factories.add(ECBehaviorCustomColor.Factory.new())
		factories.add(ECBehaviorDecal.Factory.new())
		factories.add(ECBehaviorEnvMapProbe.Factory.new())
		factories.add(ECBehaviorForceField.Factory.new())
		factories.add(ECBehaviorHitScan.Factory.new())
		factories.add(ECBehaviorLight.Factory.new())
		factories.add(ECBehaviorLightDimmer.Factory.new())
		factories.add(ECBehaviorLightAnimation.Factory.new())
		factories.add(ECBehaviorNavigationBlocker.Factory.new())
		factories.add(ECBehaviorNavigationSpace.Factory.new())
		factories.add(ECBehaviorParticleEmitter.Factory.new())
		factories.add(ECBehaviorRandomizeCreation.Factory.new())
		factories.add(ECBehaviorRandomizeGeometry.Factory.new())
		factories.add(ECBehaviorRidable.Factory.new())
		factories.add(ECBehaviorShowElement.Factory.new())
		factories.add(ECBehaviorShowMessage.Factory.new())
		factories.add(ECBehaviorStateMachine.Factory.new())
	end
	
	/** \brief Add actor behavior factories to factory list. */
	func void addActorFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorActorAIAction.Factory.new())
		factories.add(ECBehaviorActorAnimated.Factory.new())
		factories.add(ECBehaviorActorCutscene.Factory.new())
		factories.add(ECBehaviorActorIK.Factory.new())
		factories.add(ECBehaviorActorMover.Factory.new())
		factories.add(ECBehaviorActorMoverUnstuck.Factory.new())
		factories.add(ECBehaviorActorTransmission.Factory.new())
		factories.add(ECBehaviorAlignActor.Factory.new())
		factories.add(ECBehaviorAvoidCollision.Factory.new())
		factories.add(ECBehaviorBehaviorTree.Factory.new())
		factories.add(ECBehaviorBodyTilting.Factory.new())
		factories.add(ECBehaviorClearPath.Factory.new())
		factories.add(ECBehaviorColliderAI.Factory.new())
		factories.add(ECBehaviorFootStepConfig.Factory.new())
		factories.add(ECBehaviorFootSteps.Factory.new())
		factories.add(ECBehaviorInteractionElement.Factory.new())
		factories.add(ECBehaviorLocomotion.Factory.new())
		factories.add(ECBehaviorLookAt.Factory.new())
		factories.add(ECBehaviorNavigator.Factory.new())
		factories.add(ECBehaviorParameterTable.Factory.new())
		factories.add(ECBehaviorProjectToGround.Factory.new())
		factories.add(ECBehaviorRideOn.Factory.new())
		factories.add(ECBehaviorStepAside.Factory.new())
	end
	
	/** \brief Add animated behavior factories to factory list. */
	func void addAnimatedFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorAnimated.Factory.new())
		factories.add(ECBehaviorTwoStateAnimated.Factory.new())
	end
	
	/** \brief Add attach behavior factories to factory list. */
	func void addAttachFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorAttachable.Factory.new())
		factories.add(ECBehaviorAttachments.Factory.new())
		factories.add(ECBehaviorAttachSlot.Factory.new())
		factories.add(ECBehaviorAttachToParent.Factory.new())
	end
	
	/** \brief Add behavior tree behavior factories to factory list. */
	func void addBehaviorTreeFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorBehaviorTreeFlags.Factory.new())
		factories.add(ECBehaviorBehaviorTreeTimer.Factory.new())
	end
	
	/** \brief Add conversation behavior factories to factory list. */
	func void addConversationFactories(BehaviorFactoryList factories)
		factories.add(ECBCTRRBindings.Factory.new())
		factories.add(ECBehaviorConversation.Factory.new())
		factories.add(ECBehaviorConversationActor.Factory.new())
	end
	
	/** \brief Add dynamic skin behavior factories to factory list. */
	func void addDynamicSkinFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorAttachDynamicSkin.Factory.new())
		factories.add(ECBehaviorDynamicSkin.Factory.new())
		factories.add(ECBehaviorRenderableCamera.Factory.new())
		factories.add(ECBehaviorRenderableCanvas.Factory.new())
		factories.add(ECBehaviorRenderableCustomColor.Factory.new())
		factories.add(ECBehaviorRenderableDesktop.Factory.new())
		factories.add(ECBehaviorRenderableLight.Factory.new())
		factories.add(ECBehaviorRenderablePanel.Factory.new())
	end
	
	/** \brief Add effect behavior factories to factory list. */
	func void addEffectFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorOutline.Factory.new())
		factories.add(ECBehaviorSkinSwitcher.Factory.new())
	end
	
	/** \brief Add interaction behavior factories to factory list. */
	func void addInteractionFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorControlDesktop.Factory.new())
		factories.add(ECBehaviorGrabber.Factory.new())
		factories.add(ECBehaviorGrabSpot.Factory.new())
		factories.add(ECBehaviorInteraction.Factory.new())
		factories.add(ECBehaviorInteractionSpot.Factory.new())
		factories.add(ECBehaviorInteractPrompt.Factory.new())
		factories.add(ECBehaviorLookedAt.Factory.new())
		factories.add(ECBehaviorOccupier.Factory.new())
		factories.add(ECBehaviorVRHandPointedAt.Factory.new())
	end
	
	/** \brief Add inventory behavior factories to factory list. */
	func void addInventoryFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorInventory.Factory.new())
		factories.add(ECBehaviorStashable.Factory.new())
	end
	
	/** \brief Add network behavior factories to factory list. */
	func void addNetworkFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorNetworkState.Factory.new())
		factories.add(ECBehaviorNStateGeometry.Factory.new())
		factories.add(ECBehaviorNStateLocomotion.Factory.new())
	end
	
	/** \brief Add player behavior factories to factory list. */
	func void addPlayerFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorPlayerControllable.Factory.new())
		factories.add(ECBehaviorPlayerInputCrouch.Factory.new())
		factories.add(ECBehaviorPlayerInputLook.Factory.new())
		factories.add(ECBehaviorPlayerInputMove.Factory.new())
		factories.add(ECBehaviorPlayerInputTurn.Factory.new())
		// ECBehaviorPlayerInteractPrompt: to use create subclass and implement abstracts
		// ECBehaviorPlayerLookAtInteractPrompt: to use create subclass and implement abstracts
	end
	
	/** \brief Add sky behavior factories to factory list. */
	func void addSkyFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorDayTimeSky.Factory.new())
		factories.add(ECBehaviorSky.Factory.new())
	end
	
	/** \brief Add sound behavior factories to factory list. */
	func void addSoundFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorAnnouncer.Factory.new())
		factories.add(ECBehaviorHearSounds.Factory.new())
		factories.add(ECBehaviorPlaySound.Factory.new())
		factories.add(ECBehaviorPlaySoundRandom.Factory.new())
		factories.add(ECBehaviorSpeaker.Factory.new())
	end
	
	/** \brief Add trigger behavior factories to factory list. */
	func void addTriggerFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorEvaluate.Factory.new())
		factories.add(ECBehaviorTimer.Factory.new())
		factories.add(ECBehaviorToggle.Factory.new())
		factories.add(ECBehaviorTouching.Factory.new())
		factories.add(ECBehaviorTouchSensor.Factory.new())
		factories.add(ECBehaviorTriggered.Factory.new())
	end
	
	/** \brief Add VR behavior factories to factory list. */
	func void addVRFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorVRControlDesktop.Factory.new())
		factories.add(ECBehaviorVRHand.Factory.new())
		factories.add(ECBehaviorVRHandAction.Factory.new())
		factories.add(ECBehaviorVRHandLaserPointer.Factory.new())
		factories.add(ECBehaviorVRHandPointAt.Factory.new())
		factories.add(ECBehaviorVRHandPose.Factory.new())
		factories.add(ECBehaviorVRHMD.Factory.new())
		factories.add(ECBehaviorVRPlayspace.Factory.new())
	end
	
	/** \brief Add rail behavior factories to factory list. */
	func void addRailFactories(BehaviorFactoryList factories)
		factories.add(ECBehaviorMoveOnRail.Factory.new())
	end
	
	/** \brief Add all behavior factories to factory list. */
	func void addAllFactories(BehaviorFactoryList factories)
		addCommonFactories(factories)
		addActorFactories(factories)
		addAnimatedFactories(factories)
		addAttachFactories(factories)
		addBehaviorTreeFactories(factories)
		addConversationFactories(factories)
		addDynamicSkinFactories(factories)
		addEffectFactories(factories)
		addInteractionFactories(factories)
		addInventoryFactories(factories)
		addNetworkFactories(factories)
		addPlayerFactories(factories)
		addSkyFactories(factories)
		addSoundFactories(factories)
		addTriggerFactories(factories)
		addVRFactories(factories)
		addRailFactories(factories)
	end
end
